# PANA(Pearl Abyss News Archive)
License : MIT
## 오픈소스소프트웨어 Term Project
컴퓨터공학과 20101258 우상준
<br/><br/>

## 개요
국내 게임 개발사인 펄어비스(Pearl Abyss)에 대한 기사를 자주 찾아보아, 매번 검색하는 수고를 덜기 위해 원클릭으로 펄어비스를 검색하고 기사 목록까지 가져오는 프로그램을 만들었다.<br/>
초기에는 네이버에 한글 검색과 구글에 영문 검색 두 가지를 모두 하려했으나 한국 회사이므로 국내 포털에 소식이 더 빠르게 올라올 것이라 생각해 영문 검색은 불필요하다고 판단했다.<br/>

## 동작
네이버에 펄어비스를 검색하면 뉴스탭의 1페이지 뉴스들이 관련도순으로 정렬된다. 최신순 정렬은 단순 주가변동에 의한 의미없는 기사들이 많아 관련도순 정렬을 사용한다.<br/>
1. 검색 페이지를 request한다.
1. 기존에 저장되지 않은 새로운 기사를 가져온다.
1. 가져온 기사들을 시간순으로 정렬한다.
1. html파일로 저장한다.

## 세부동작
1. (line 58~62) 네이버에 '펄어비스'검색어의 뉴스탭 페이지를 request한다. request가 완료된 시점에서 현재 시간을 저장한다(기사의 입력시간을 구하기 위함).성공적으로 받지 못했다면 에러를 발생시킨다.
1. (line 64~67) BeautifulSoup 라이브러리를 이용해 class가 list_news인 ul태그 객체(뉴스 컨테이너)와 그 자식 태그중 class가 bx인 li태그 객체(각각의 뉴스)들을 가져온다.
1. (line 69~78) 현재까지 pana.html에 저장된 기사들의 제목 중 앞 14글자가 담긴 list가 pickle파일로 저장되어 있다. 이 pickle파일을 불러온다.
1. (line 80~95) 2에서 가져온 뉴스의 제목 중 앞의 14글자만 추출해 3의 list의 item들 중 중복되는 것이 있는지 확인한다. 기사제목 전체를 사용하면 길이가 길어져 제목 중 14글자가 겹친다면 동일하거나 유사한 기사라고 판단해 저장하지 않는다. 새로운 기사라면 list에 제목의 앞 14글자를 저장한다.<br/>검색 화면을 보면 기사제목 옆에 시간정보가 2가지 유형으로 표현된다. 한 가지는 '~전'(ex. 2시간 전, 3일 전)이고, 한 가지는 '20xx.xx.xx'(ex. 2021-12-08)이다. 정규표현식을 이용해 위와 같은 시간정보가 있는 태그를 찾는다. 시간표현이 첫 번째와 같은 방법이라면 datetime 라이브러리를 이용해 기사의 입력시간을 대략적으로 구하고, 두 번째 방법이라면 내용을 그대로 사용한다.<br/>
시간정보까지 구했다면 해당 기사의 제목과 기사 입력시간을 연결한 텍스트에 기사의 링크를 연결해 pana.html파일에 저장한다.
1. (line 97~100) 2의 list가 갱신되었으므로 pickle파일도 갱신한다.
1. (line 103~119) pana.html파일의 줄에 정규표현식을 이용해 시간정보만 추출하고 그 시간정보를 이차원 list에 저장한 후 시간정보를 key로하여 내림차순 정렬한다.
1. (line 121~124) 정렬된 내용을 pana.html파일에 덮어쓴다. 최종적으로 최신의 기사가 가장 위로오게 되고 오래된 기사일수록 아래에 위치한다.

## 장단점
### 장점
* html파일로 저장하기에 브라우저의 링크기능, 검색기능(Ctrl + F)을 이용할 수 있다.
* 처음 프로그램 실행 이후의 주요한 뉴스들을 저장해 둘 수 있다.(archive)
* 서로 유사한 기사는 저장하지 않는다.
### 단점
* html파일이므로 삭제하고 싶은 기사가 있을 때 어떤 사람은 수정하기 어려울 수 있다. (html파일을 편집할 수 있는 프로그램이 필요)
* 실행할 때마다 전체 기사에 대해 시간순으로 정렬하므로 저장된 기사가 많아질수록 정렬에 시간이 많이 걸린다.

## 추가정보
* 기사의 입력시간은 해당 기사의 페이지에서 확인할 수 있지만 언론사마다 시간정보를 담은 태그나 태그의 class가 다르고, 어떤 언론사는 기사 페이지에 오늘의 날짜가 적혀있기도 하여(뉴스1) 정규표현식으로 특정하기도 어렵다. 따라서 대략적인 기사 입력 시간을 구하는 방법을 사용했다.
* 기사 입력 날짜는 구할 수 있지만 시간까지 구하기 어려운 경우는 시간 란을 비워두지 않고 정렬을 위해 00시로 통일했다.